"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var ckeditor,MediaUploader=function(){function e(t){_classCallCheck(this,e),this.loader=t,this.url="/Media/Upload"}return _createClass(e,[{key:"upload",value:function(){var e=this;return this.loader.file.then((function(t){return new Promise((function(n,o){e._initRequest(),e._initListeners(n,o,t),e._sendRequest(t)}))}))}},{key:"abort",value:function(){this.xhr&&this.xhr.abort()}},{key:"_initRequest",value:function(){var e=this.xhr=new XMLHttpRequest;e.open("POST",this.url,!0),e.responseType="json"}},{key:"_initListeners",value:function(e,t,n){var o=this.xhr,r=this.loader,i="Couldn't upload file: ".concat(n.name,".");o.addEventListener("error",(function(){return t(i)})),o.addEventListener("abort",(function(){return t()})),o.addEventListener("load",(function(){var n=o.response;if(!n||n.error)return t(n&&n.error?n.error:i);e({default:n.url})})),o.upload&&o.upload.addEventListener("progress",(function(e){e.lengthComputable&&(r.uploadTotal=e.total,r.uploaded=e.loaded)}))}},{key:"_sendRequest",value:function(e){var t=new FormData;t.append("upload",e),this.xhr.send(t)}}]),e}();function uploadImage(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return new MediaUploader(e)}}function openEditor(){}function fillContent(){document.getElementById("html-content").value=ckeditor.getData(),document.getElementById("text-content").value=document.getElementById("content-editor").innerText}BalloonEditor.create(document.querySelector("#content-editor"),{toolbar:["undo","redo","heading","bold","italic","blockQuote","imageUpload","indent","outdent","link","numberedList","bulletedList","insertTable"],extraPlugins:[uploadImage]}).then((function(e){(ckeditor=e).setData(document.getElementById("html-content").value)})).catch((function(e){console.error(e)})),document.getElementById("content-form").addEventListener("submit",fillContent),document.getElementById("content-editor").addEventListener("click",openEditor);